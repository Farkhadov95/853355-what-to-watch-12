{"ast":null,"code":"var _jsxFileName = \"/Users/farkhadov950405/Desktop/HTML_Academy/Projects/WhatToWatch/853355-what-to-watch-12/src/components/mylist-button/mylist-button.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { AppRoute, AuthorizationStatus } from '../../const';\nimport { useAppDispatch, useAppSelector } from '../../hooks';\nimport { processErrorHandle } from '../../services/process-error-handler';\nimport { setFavoriteStatusAction } from '../../store/films-data/films-data';\nimport { authorizationStatusSelector, filmsSelector } from '../../store/selectors';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MyListButton(_ref) {\n  _s();\n  let {\n    id\n  } = _ref;\n  const authorizationStatus = useAppSelector(authorizationStatusSelector);\n  const filmsArray = useAppSelector(filmsSelector);\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const film = filmsArray.find(item => item.id === Number(id));\n  const getFavoritesNumber = () => {\n    const favorites = filmsArray.filter(item => item.isFavorite);\n    return favorites.length;\n  };\n  const [favoritesCount, setFavoritesCount] = useState(getFavoritesNumber());\n  useEffect(() => {\n    setFavoritesCount(getFavoritesNumber());\n  }, [filmsArray]);\n  const onStatusClick = () => {\n    if (authorizationStatus === AuthorizationStatus.Auth) {\n      dispatch(setFavoriteStatusAction({\n        id: Number(id),\n        status: film !== null && film !== void 0 && film.isFavorite ? 0 : 1\n      }));\n    } else {\n      navigate(AppRoute.Login);\n      processErrorHandle('Please, log in to add this film to your list');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"btn btn--list film-card__button\",\n    type: \"button\",\n    onClick: onStatusClick,\n    children: [film !== null && film !== void 0 && film.isFavorite ? /*#__PURE__*/_jsxDEV(\"svg\", {\n      width: \"18\",\n      height: \"14\",\n      viewBox: \"0 0 18 14\",\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      children: /*#__PURE__*/_jsxDEV(\"path\", {\n        fillRule: \"evenodd\",\n        clipRule: \"evenodd\",\n        d: \"M2.40513 5.35353L6.1818 8.90902L15.5807 0L18 2.80485L6.18935 14L0 8.17346L2.40513 5.35353Z\",\n        fill: \"#EEE5B5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n      viewBox: \"0 0 19 20\",\n      width: \"19\",\n      height: \"20\",\n      children: /*#__PURE__*/_jsxDEV(\"use\", {\n        xlinkHref: \"#add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      children: \"My list\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"film-card__count\",\n      children: favoritesCount\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n_s(MyListButton, \"AcuD6FG8Qd30LlfOt5jKaNl2p08=\", false, function () {\n  return [useAppSelector, useAppSelector, useAppDispatch, useNavigate];\n});\n_c = MyListButton;\nexport default MyListButton;\nvar _c;\n$RefreshReg$(_c, \"MyListButton\");","map":{"version":3,"names":["useEffect","useState","useNavigate","AppRoute","AuthorizationStatus","useAppDispatch","useAppSelector","processErrorHandle","setFavoriteStatusAction","authorizationStatusSelector","filmsSelector","jsxDEV","_jsxDEV","MyListButton","_ref","_s","id","authorizationStatus","filmsArray","dispatch","navigate","film","find","item","Number","getFavoritesNumber","favorites","filter","isFavorite","length","favoritesCount","setFavoritesCount","onStatusClick","Auth","status","Login","className","type","onClick","children","width","height","viewBox","fill","xmlns","fillRule","clipRule","d","fileName","_jsxFileName","lineNumber","columnNumber","xlinkHref","_c","$RefreshReg$"],"sources":["/Users/farkhadov950405/Desktop/HTML_Academy/Projects/WhatToWatch/853355-what-to-watch-12/src/components/mylist-button/mylist-button.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { AppRoute, AuthorizationStatus } from '../../const';\nimport { useAppDispatch, useAppSelector } from '../../hooks';\nimport { processErrorHandle } from '../../services/process-error-handler';\nimport { setFavoriteStatusAction } from '../../store/films-data/films-data';\nimport { authorizationStatusSelector, filmsSelector } from '../../store/selectors';\n\ntype MyListButtonProps = {\n    id: number;\n}\n\nfunction MyListButton({id}: MyListButtonProps): JSX.Element {\n  const authorizationStatus = useAppSelector(authorizationStatusSelector);\n  const filmsArray = useAppSelector(filmsSelector);\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n\n  const film = filmsArray.find((item) => item.id === Number(id));\n  const getFavoritesNumber = () => {\n    const favorites = filmsArray.filter((item) => item.isFavorite);\n    return favorites.length;\n  };\n\n  const [favoritesCount, setFavoritesCount] = useState(getFavoritesNumber());\n\n  useEffect(() => {\n    setFavoritesCount(getFavoritesNumber());\n  }, [filmsArray]);\n\n  const onStatusClick = () => {\n    if (authorizationStatus === AuthorizationStatus.Auth) {\n      dispatch(setFavoriteStatusAction({id: Number(id), status: film?.isFavorite ? 0 : 1}));\n    } else {\n      navigate(AppRoute.Login);\n      processErrorHandle('Please, log in to add this film to your list');\n    }\n  };\n\n  return (\n    <button className=\"btn btn--list film-card__button\" type=\"button\" onClick={onStatusClick}>\n      {\n        film?.isFavorite ?\n          <svg width=\"18\" height=\"14\" viewBox=\"0 0 18 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M2.40513 5.35353L6.1818 8.90902L15.5807 0L18 2.80485L6.18935 14L0 8.17346L2.40513 5.35353Z\" fill=\"#EEE5B5\"/>\n          </svg> :\n          <svg viewBox=\"0 0 19 20\" width=\"19\" height=\"20\">\n            <use xlinkHref=\"#add\"></use>\n          </svg>\n      }\n      <span>My list</span>\n      <span className=\"film-card__count\">{favoritesCount}</span>\n    </button>\n  );\n}\n\nexport default MyListButton;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}