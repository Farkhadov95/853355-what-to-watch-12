{"ast":null,"code":"import _slicedToArray from\"/Users/farkhadov950405/Desktop/HTML_Academy/Projects/WhatToWatch/853355-what-to-watch-12/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";function MiniPlayer(_ref){var film=_ref.film,isActive=_ref.isActive;var videoRef=useRef(null);useEffect(function(){if(videoRef.current===null){return;}videoRef.current.addEventListener('loadeddata',function(){if(videoRef.current===null){return;}videoRef.current.play();});return videoRef.current.removeEventListener('loadeddata',function(){if(videoRef.current===null){return;}videoRef.current.play();});},[isActive,videoRef]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showVideo=_useState2[0],setShowVideo=_useState2[1];useEffect(function(){var timeoutId=null;if(isActive){timeoutId=setTimeout(function(){setShowVideo(true);},1000);}else{setShowVideo(false);}return function(){if(timeoutId){clearTimeout(timeoutId);}};},[isActive]);return showVideo?/*#__PURE__*/_jsx(\"video\",{ref:videoRef,width:\"280\",height:\"175\",autoPlay:true,muted:true,children:/*#__PURE__*/_jsx(\"source\",{src:film.previewVideoLink,type:\"video/mp4\"})}):/*#__PURE__*/_jsx(\"img\",{src:film.previewImage,alt:\"name\",width:\"280\",height:\"175\"});}export default MiniPlayer;","map":{"version":3,"names":["useEffect","useRef","useState","jsx","_jsx","MiniPlayer","_ref","film","isActive","videoRef","current","addEventListener","play","removeEventListener","_useState","_useState2","_slicedToArray","showVideo","setShowVideo","timeoutId","setTimeout","clearTimeout","ref","width","height","autoPlay","muted","children","src","previewVideoLink","type","previewImage","alt"],"sources":["/Users/farkhadov950405/Desktop/HTML_Academy/Projects/WhatToWatch/853355-what-to-watch-12/src/components/mini-player/mini-player.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport { Film } from '../../types/films';\n\ntype playerProps = {\n  film: Film;\n  isActive: boolean;\n};\n\nfunction MiniPlayer({film, isActive}: playerProps) {\n  const videoRef = useRef<HTMLVideoElement | null>(null);\n\n  useEffect(() => {\n    if(videoRef.current === null) {\n      return;\n    }\n\n    videoRef.current.addEventListener('loadeddata', () => {\n      if(videoRef.current === null) {\n        return;\n      }\n      videoRef.current.play();\n    });\n\n    return videoRef.current.removeEventListener('loadeddata', () => {\n      if(videoRef.current === null) {\n        return;\n      }\n      videoRef.current.play();\n    });\n\n  }, [isActive, videoRef]);\n\n  const [showVideo, setShowVideo] = useState(false);\n\n  useEffect(() => {\n    let timeoutId: NodeJS.Timeout | null = null;\n    if (isActive) {\n      timeoutId = setTimeout(() => {\n        setShowVideo(true);\n      }, 1000);\n    } else {\n      setShowVideo(false);\n    }\n\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [isActive]);\n\n  return (\n    showVideo ?\n      <video\n        ref={videoRef}\n        width=\"280\"\n        height=\"175\"\n        autoPlay\n        muted\n      >\n        <source src={film.previewVideoLink} type=\"video/mp4\" />\n      </video>\n      :\n      <img src={film.previewImage} alt=\"name\" width=\"280\" height=\"175\" />\n  );\n}\n\nexport default MiniPlayer;\n\n"],"mappings":"8KAAA,OAASA,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAQpD,QAAS,CAAAC,UAAUA,CAAAC,IAAA,CAAgC,IAA9B,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAAEC,QAAQ,CAAAF,IAAA,CAARE,QAAQ,CACjC,GAAM,CAAAC,QAAQ,CAAGR,MAAM,CAA0B,IAAI,CAAC,CAEtDD,SAAS,CAAC,UAAM,CACd,GAAGS,QAAQ,CAACC,OAAO,GAAK,IAAI,CAAE,CAC5B,OACF,CAEAD,QAAQ,CAACC,OAAO,CAACC,gBAAgB,CAAC,YAAY,CAAE,UAAM,CACpD,GAAGF,QAAQ,CAACC,OAAO,GAAK,IAAI,CAAE,CAC5B,OACF,CACAD,QAAQ,CAACC,OAAO,CAACE,IAAI,EAAE,CACzB,CAAC,CAAC,CAEF,MAAO,CAAAH,QAAQ,CAACC,OAAO,CAACG,mBAAmB,CAAC,YAAY,CAAE,UAAM,CAC9D,GAAGJ,QAAQ,CAACC,OAAO,GAAK,IAAI,CAAE,CAC5B,OACF,CACAD,QAAQ,CAACC,OAAO,CAACE,IAAI,EAAE,CACzB,CAAC,CAAC,CAEJ,CAAC,CAAE,CAACJ,QAAQ,CAAEC,QAAQ,CAAC,CAAC,CAExB,IAAAK,SAAA,CAAkCZ,QAAQ,CAAC,KAAK,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA1CG,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAE9Bf,SAAS,CAAC,UAAM,CACd,GAAI,CAAAmB,SAAgC,CAAG,IAAI,CAC3C,GAAIX,QAAQ,CAAE,CACZW,SAAS,CAAGC,UAAU,CAAC,UAAM,CAC3BF,YAAY,CAAC,IAAI,CAAC,CACpB,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,IAAM,CACLA,YAAY,CAAC,KAAK,CAAC,CACrB,CAEA,MAAO,WAAM,CACX,GAAIC,SAAS,CAAE,CACbE,YAAY,CAACF,SAAS,CAAC,CACzB,CACF,CAAC,CACH,CAAC,CAAE,CAACX,QAAQ,CAAC,CAAC,CAEd,MACE,CAAAS,SAAS,cACPb,IAAA,UACEkB,GAAG,CAAEb,QAAS,CACdc,KAAK,CAAC,KAAK,CACXC,MAAM,CAAC,KAAK,CACZC,QAAQ,MACRC,KAAK,MAAAC,QAAA,cAELvB,IAAA,WAAQwB,GAAG,CAAErB,IAAI,CAACsB,gBAAiB,CAACC,IAAI,CAAC,WAAW,EAAG,EACjD,cAER1B,IAAA,QAAKwB,GAAG,CAAErB,IAAI,CAACwB,YAAa,CAACC,GAAG,CAAC,MAAM,CAACT,KAAK,CAAC,KAAK,CAACC,MAAM,CAAC,KAAK,EAAG,CAEzE,CAEA,cAAe,CAAAnB,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}