{"ast":null,"code":"import _toConsumableArray from\"/Users/farkhadov950405/Desktop/HTML_Academy/Projects/WhatToWatch/853355-what-to-watch-12/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/farkhadov950405/Desktop/HTML_Academy/Projects/WhatToWatch/853355-what-to-watch-12/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import FilmCards from'../../components/film-cards/film-cards';import GenreItem from'../../components/genre-item/genre-item';import{DEFAULT_GENRE,FilmsToRender}from'../../const';import{useAppSelector}from'../../hooks';import{filmsSelector,genreSelector}from'../../store/selectors';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FilmsCatalogScreen(){var filmsArray=useAppSelector(filmsSelector);var selectedGenre=useAppSelector(genreSelector);var _useState=useState(FilmsToRender.DEFAULT_FILMS_COUNT),_useState2=_slicedToArray(_useState,2),filmsCount=_useState2[0],setFilmsCount=_useState2[1];var filmsToDisplay=function filmsToDisplay(){if(selectedGenre===DEFAULT_GENRE){return filmsArray;}return filmsArray.filter(function(film){return film.genre===selectedGenre;});};var incrementFilmsCount=function incrementFilmsCount(){setFilmsCount(filmsCount+FilmsToRender.STEP_SHOW_MORE);};var availableGenres=[DEFAULT_GENRE].concat(_toConsumableArray(new Set(filmsArray.map(function(film){return film.genre;}))));useEffect(function(){setFilmsCount(FilmsToRender.DEFAULT_FILMS_COUNT);},[selectedGenre]);return/*#__PURE__*/_jsxs(\"section\",{className:\"catalog\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"catalog__title visually-hidden\",children:\"Catalog\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"catalog__genres-list\",children:availableGenres.slice(0,10).map(function(genre){return/*#__PURE__*/_jsx(GenreItem,{genre:genre,isActive:selectedGenre===genre},genre);})}),/*#__PURE__*/_jsx(\"div\",{className:\"catalog__films-list\",children:/*#__PURE__*/_jsx(FilmCards,{films:filmsToDisplay(),currentFilmsCount:filmsCount})}),filmsCount<filmsToDisplay().length?/*#__PURE__*/_jsx(\"div\",{className:\"catalog__more\",children:/*#__PURE__*/_jsx(\"button\",{className:\"catalog__button\",type:\"button\",onClick:incrementFilmsCount,children:\"Show more\"})}):'']});}export default FilmsCatalogScreen;","map":{"version":3,"names":["useEffect","useState","FilmCards","GenreItem","DEFAULT_GENRE","FilmsToRender","useAppSelector","filmsSelector","genreSelector","jsx","_jsx","jsxs","_jsxs","FilmsCatalogScreen","filmsArray","selectedGenre","_useState","DEFAULT_FILMS_COUNT","_useState2","_slicedToArray","filmsCount","setFilmsCount","filmsToDisplay","filter","film","genre","incrementFilmsCount","STEP_SHOW_MORE","availableGenres","concat","_toConsumableArray","Set","map","className","children","slice","isActive","films","currentFilmsCount","length","type","onClick"],"sources":["/Users/farkhadov950405/Desktop/HTML_Academy/Projects/WhatToWatch/853355-what-to-watch-12/src/pages/films-catalog-screen/films-catalog-screen.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport FilmCards from '../../components/film-cards/film-cards';\nimport GenreItem from '../../components/genre-item/genre-item';\nimport { DEFAULT_GENRE, FilmsToRender } from '../../const';\nimport { useAppSelector } from '../../hooks';\nimport { filmsSelector, genreSelector } from '../../store/selectors';\n\nfunction FilmsCatalogScreen():JSX.Element {\n\n  const filmsArray = useAppSelector(filmsSelector);\n  const selectedGenre = useAppSelector(genreSelector);\n  const [filmsCount, setFilmsCount] = useState(FilmsToRender.DEFAULT_FILMS_COUNT);\n\n  const filmsToDisplay = () => {\n    if (selectedGenre === DEFAULT_GENRE) {\n      return filmsArray;\n    }\n    return filmsArray.filter((film) => film.genre === selectedGenre);\n  };\n\n  const incrementFilmsCount = () => {\n    setFilmsCount(filmsCount + FilmsToRender.STEP_SHOW_MORE);\n  };\n\n  const availableGenres = [DEFAULT_GENRE, ...new Set(filmsArray.map((film) => film.genre))];\n\n  useEffect(() => {\n    setFilmsCount(FilmsToRender.DEFAULT_FILMS_COUNT);\n  }, [selectedGenre]);\n\n  return(\n    <section className=\"catalog\">\n      <h2 className=\"catalog__title visually-hidden\">Catalog</h2>\n      <ul className=\"catalog__genres-list\">\n        {\n          availableGenres.slice(0, 10).map((genre) =>\n            <GenreItem key={genre} genre={genre} isActive={selectedGenre === genre} />)\n        }\n      </ul>\n\n      <div className=\"catalog__films-list\">\n        <FilmCards films={filmsToDisplay()} currentFilmsCount={filmsCount}/>\n      </div>\n\n      {\n        filmsCount < filmsToDisplay().length ?\n          <div className=\"catalog__more\">\n            <button className=\"catalog__button\" type=\"button\" onClick={incrementFilmsCount}>Show more</button>\n          </div> : ''\n      }\n    </section>\n  );\n}\n\nexport default FilmsCatalogScreen;\n"],"mappings":"oWAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,SAAS,KAAM,wCAAwC,CAC9D,MAAO,CAAAC,SAAS,KAAM,wCAAwC,CAC9D,OAASC,aAAa,CAAEC,aAAa,KAAQ,aAAa,CAC1D,OAASC,cAAc,KAAQ,aAAa,CAC5C,OAASC,aAAa,CAAEC,aAAa,KAAQ,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAErE,QAAS,CAAAC,kBAAkBA,CAAA,CAAe,CAExC,GAAM,CAAAC,UAAU,CAAGR,cAAc,CAACC,aAAa,CAAC,CAChD,GAAM,CAAAQ,aAAa,CAAGT,cAAc,CAACE,aAAa,CAAC,CACnD,IAAAQ,SAAA,CAAoCf,QAAQ,CAACI,aAAa,CAACY,mBAAmB,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAH,SAAA,IAAxEI,UAAU,CAAAF,UAAA,IAAEG,aAAa,CAAAH,UAAA,IAEhC,GAAM,CAAAI,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAA,CAAS,CAC3B,GAAIP,aAAa,GAAKX,aAAa,CAAE,CACnC,MAAO,CAAAU,UAAU,CACnB,CACA,MAAO,CAAAA,UAAU,CAACS,MAAM,CAAC,SAACC,IAAI,QAAK,CAAAA,IAAI,CAACC,KAAK,GAAKV,aAAa,GAAC,CAClE,CAAC,CAED,GAAM,CAAAW,mBAAmB,CAAG,QAAtB,CAAAA,mBAAmBA,CAAA,CAAS,CAChCL,aAAa,CAACD,UAAU,CAAGf,aAAa,CAACsB,cAAc,CAAC,CAC1D,CAAC,CAED,GAAM,CAAAC,eAAe,EAAIxB,aAAa,EAAAyB,MAAA,CAAAC,kBAAA,CAAK,GAAI,CAAAC,GAAG,CAACjB,UAAU,CAACkB,GAAG,CAAC,SAACR,IAAI,QAAK,CAAAA,IAAI,CAACC,KAAK,GAAC,CAAC,EAAC,CAEzFzB,SAAS,CAAC,UAAM,CACdqB,aAAa,CAAChB,aAAa,CAACY,mBAAmB,CAAC,CAClD,CAAC,CAAE,CAACF,aAAa,CAAC,CAAC,CAEnB,mBACEH,KAAA,YAASqB,SAAS,CAAC,SAAS,CAAAC,QAAA,eAC1BxB,IAAA,OAAIuB,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,SAAO,EAAK,cAC3DxB,IAAA,OAAIuB,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAEhCN,eAAe,CAACO,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAACH,GAAG,CAAC,SAACP,KAAK,qBACrCf,IAAA,CAACP,SAAS,EAAasB,KAAK,CAAEA,KAAM,CAACW,QAAQ,CAAErB,aAAa,GAAKU,KAAM,EAAvDA,KAAK,CAAqD,GAAC,EAE5E,cAELf,IAAA,QAAKuB,SAAS,CAAC,qBAAqB,CAAAC,QAAA,cAClCxB,IAAA,CAACR,SAAS,EAACmC,KAAK,CAAEf,cAAc,EAAG,CAACgB,iBAAiB,CAAElB,UAAW,EAAE,EAChE,CAGJA,UAAU,CAAGE,cAAc,EAAE,CAACiB,MAAM,cAClC7B,IAAA,QAAKuB,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BxB,IAAA,WAAQuB,SAAS,CAAC,iBAAiB,CAACO,IAAI,CAAC,QAAQ,CAACC,OAAO,CAAEf,mBAAoB,CAAAQ,QAAA,CAAC,WAAS,EAAS,EAC9F,CAAG,EAAE,GAEP,CAEd,CAEA,cAAe,CAAArB,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}